# unity_player_widget

A plugin that allows you to embed a Unity project in Flutter.

# How to install
## Preparation
0. Add unity_player_widget plugin to your Flutter project.
1. Create a Unity project (or use existed).
2. Download [Editor folder](https://github.com/Pavel-Kupreichyk/unity-player-widget/tree/master/Editor) and add it to your unity project.
2. Create a folder named ‘unity’ in the Flutter project.
3. Move created Unity project to ‘unity’ folder.<br/>

Your flutter project folder should look like this:<br/>
**-android<br/>
-ios<br/>
-lib<br/>
-test<br/>
-unity<br/>
   └{Your Unity Project}<br/>
-pubspec.yml<br/>
-README.md<br/>**

## Android
1. In Unity project go to File->Build settings
2. Add at least 1 scene to the project
3. Switch to android
4. Go to->Player Settings<br/>
  **Unity player settings:<br/>
    Scripting Backend -> IL2CPP<br/>
    ARMv7 -> TRUE<br/>
    ARM64 -> TRUE<br/>**
5. Select UnityPlayerWidget->Export Android
6. In Flutter project go to android/unityLibrary/libs and create package for every aar or jar file in the folder.
(If you use AndroidStudio, just right-click to your project, select New->Module->{Import .JAR/.AAR Package} and find aar or jar file in the libs folder).
7. Move all created packages into android folder. 
8. Go to android/unityLibrary/build.gradle<br/>
- Remove **// GENERATED BY UNITY. REMOVE THIS COMMENT TO PREVENT OVERWRITING WHEN EXPORTING AGAIN**

- Replace all dependencies by **implementation project(':[Name of created package]')**<br/>
Your dependencies should look like this:<br/>
<pre>
dependencies {
    implementation project(':package1')
    implementation project(':package2')
    implementation project(':package3')
    implementation project(':package4')
}
</pre>
- Add buildTypes10. to android section:<br/>
<pre>android {
	//**//
	buildTypes {
		profile { matchingFallbacks = ['debug', 'release'] }
	}
}
</pre>
9. Go to android/settings.gradle<br/>
- Include all created packages (first line of file)<br/>
Your include section should look like this:<br/>
<pre>
include ':app', ':package1', ':package2', ':package3', ':package4'
</pre>
- Add this to the end of file:
<pre>
include ":unityLibrary"
project(":unityLibrary").projectDir = file("./unityLibrary")
</pre>
10. minSdkversion in android/app/build.gradle and android/unityLibrary/build.gradle must be equal.
## iOS
1. In Unity project go to File->Build settings
2. Add at least 1 scene to the project
3. Switch to iOS
4. Go to->Player Settings<br/>
  **Unity player settings:<br/>
    Scripting Backend -> IL2CPP<br/>
    ARMv7 -> TRUE<br/>
    ARM64 -> TRUE<br/>**
5. Select UnityPlayerWidget->Export iOS.
6. Open Runner.xcworkspace with Xcode and add project in unityLibrary/Unity-iPhone.xcodeproj.
7. Add Data folder to the UnityFramework in the Target Membership section.
8. Add UnityFramework to the Runner.
